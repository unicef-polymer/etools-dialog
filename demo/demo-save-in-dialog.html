<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../paper-button/paper-button.html">
<link rel="import" href="../etools-dialog.html">
<link rel="import" href="add-edit-some-item-dialog.html">
<link rel="import" href="../../etools-loading/etools-loading.html">

<dom-module id="demo-save-in-dialog">
  <style>
    paper-button {
      background-color: blue;
      color: white;
    }
    [hidden] {
        display: none !important;
    }
   </style>
  <template>
    <div style="color:red" hidden$="[[fetchSupport]]">
      Try a browser that supports `fetch` for this demo to work
    </div>
    <div>
    <paper-button on-tap="_openDialogWithOkApiCall"> Open Dialog Window with Successful Api call</paper-button>
    <paper-button on-tap="_openDialogWithNotOkApiCall"> Open Dialog Window with error on Api call</paper-button>
    </div>
  </template>

  <script>
    (function() {
      // jscs:disable
      'use strict';

      Polymer({
        is: 'demo-save-in-dialog',

        properties: {
          fetchSupport: {
            type: Boolean,
            value: true
          }
        },

        ready: function() {
          this.addEditDialog = document.createElement('add-edit-some-item-dialog');
          this.addEditDialog.setAttribute('id', 'addEditDialog');
          Polymer.dom(document.querySelector('body')).appendChild(this.addEditDialog);
          console.log(this.fetch, this.fetchSupport);
           if (!window.fetch) {
            this.fetchSupport = false;
          }
        },
        _openDialogWithOkApiCall: function() {
          this.addEditDialog.successfulApiCall = true;
          this.addEditDialog.open();
        },
         _openDialogWithNotOkApiCall: function() {
          this.addEditDialog.successfulApiCall = false;
          this.addEditDialog.open();
        }

      });

    })();
  </script>
</dom-module>
