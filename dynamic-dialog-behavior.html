<!-- Create etools-dialog programmatically and add them directly to the body.
     Now paper-dialog has an issues and the backdrop that covers all the content(if dialog is not a child of body), everything becomes unselectable.
     This behaviour will fix the issue. -->
<link rel="import" href="etools-dialog.html">
<script>
  window.etoolsBehaviors = window.etoolsBehaviors || {};
  /*
  * @polymer
  * @mixinFunction
  * @demo demo/index.html
  */
  etoolsBehaviors.DynamicDialogBehavior = (baseClass) => class extends baseClass {
    createDialog(title, size, okBtnText, cancelBtnText, closeCallback, content, removePadding, theme) {
      if (typeof content === 'undefined' || content === null) {
        // eslint-disable-next-line no-console
        console.error('[DynamicDialogBehavior] You must provide a valid dialog content');
        return false;
      }
      var dialog = document.createElement('etools-dialog');
      dialog.theme = 'confirmation';
      if (typeof theme === 'string' && theme !== '') {
        dialog.theme = theme;
      }
      if (typeof removePadding === 'boolean') {
        dialog.noPadding = removePadding;
      }
      if (typeof size === 'string' && size !== '') {
        dialog.size = 'md';
      }
      if (typeof okBtnText === 'string' && okBtnText !== '') {
        dialog.okBtnText = okBtnText;
      }
      if (typeof cancelBtnText === 'string' && cancelBtnText !== '') {
        dialog.cancelBtnText = cancelBtnText;
      }
      if (typeof title === 'string' && title !== '') {
        dialog.dialogTitle = title;
      }
      // set close callback
      if (closeCallback) {
        dialog.addEventListener('close', function(event) {
            closeCallback(event);
        });
      }

      document.querySelector('body').appendChild(dialog);

      let msgPlaceholder = dialog.shadowRoot.querySelector('#dynamicContent');
      msgPlaceholder.appendChild(content);

      return dialog;
    }

    removeDialog(dialogElement) {
     document.querySelector('body').removeChild(dialogElement);
    }

  };
</script>
